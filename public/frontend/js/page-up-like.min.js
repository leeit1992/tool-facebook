!function(t){"use strict";new(Backbone.View.extend({el:".pita-page-up-like",events:{"change #pita-like-number":"changePacket","click .pita-start-action":"startAction"},errorFormTpl:_.template('<div class="uk-notify-message <%= classes %>">                                        <a class="uk-close"></a>                                        <div>                                           <%= message %>                                        </div>                                    </div>'),initialize:function(){this.changePacket()},changePacket:function(){var a={id:t("#pita-like-number",this.el).val()};t(".pita-start-action").show(),t.post(AVTDATA.SITE_URL+"/get-up-like",a,function(a){var e=JSON.parse(a);t(".avt-message-limit").text(""),t(".pita-start-action").show(),t(".pita-setinteval").val(e.numberS),t(".avt_total_like").val(e.total),e.total<1&&(t(".pita-start-action").hide(),t(".avt-message-limit").text("Đã hết lượt sử dụng, vui lòng mua thêm...."))})},startAction:function(){var a=this,e=t(".avt_like_number").val(),i=t(".avt_total_like").val();if(parseInt(e)<=parseInt(i)){t(".avt-has-filter").attr("data-start",0),t(".avt-has-filter").text("0"),t(".avt-total-token-check-bar").css("width","1%"),t(".pita-start-action").hide(),t(".avt-message-limit").text("Đang chạy tools ...."),t(".avt-filter-token-live").show();var s=t(".pita-setinteval").val();t(".avt-total-token-check").attr("data-total",e),t(".avt-total-token-check").text(e+" Like ");var l=t(".avt-has-filter").attr("data-start"),o=t(".avt-total-token-check").attr("data-total");a.ajaxAction(l,1,o,s)}else{t(".avt-filter-token-live").hide();var n=a.errorFormTpl({message:"Vui lòng điền số lượt hoặc số lượt không đủ",classes:"uk-notify-message-danger"});t(".atl-notify-js",a.el).html(n).show(),setTimeout(function(){t(".atl-notify-js",a.el).fadeOut()},3e3)}},ajaxAction:function(a=0,e=1,i=0,s=2e3){var l=this,o={type:"upLike",start:a,limit:e,objectId:t(".pita-id-post").val(),id:t("#pita-like-number").val()};setTimeout(function(){t.post(AVTDATA.SITE_URL+"/ajax-tool-action",o,function(a){var o=JSON.parse(a);t(".avt-has-filter").attr("data-start",o.start),t(".avt-has-filter").text(o.start);var n=o.start/i*100;t(".avt-total-token-check-bar").css("width",n+"%"),t(".avt-c-token-live").text(o.tokenLive),t(".avt-c-token-die").text(o.tokenDie);var r=t(".avt_total_like").val();t(".avt_total_like").val(r-1),o.start<i?l.ajaxAction(o.start,e,i,s):(t(".avt-message-limit").text(""),t(".pita-start-action").show())})},s)}}))}(jQuery);